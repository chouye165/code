<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AE-圣诞树</title>
    <style>
        html,body{
            margin: 0;
            width:100%;
            height: 100%;
            overflow: hidden; /* 禁止滚动 */
        }
        #main{
            position: absolute; 
            top: 0; 
            left: 0;
            width: 100%;
            height: 100%;
        }
        #video1{
            width:100%;
            height:100%;
            object-fit: cover; /* 填满容器且保持比例 */
            pointer-events: none; /* 禁用鼠标事件，防止意外触发控制栏 */
        }
        .hidden{
            display:none;
        }
    </style>
</head>
<body>
    <div id="main">
        <!-- 无controls、无提示按钮，仅核心视频标签 -->
        <video id="video1" muted loop preload="auto">
            <source src="./1.mp4" type="video/mp4">
            <source src="./1.webm" type="video/webm">
            您的浏览器不支持视频播放
        </video>
    </div>

<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script type="text/javascript">
    $(function(){
        var video = document.getElementById("video1");

        // 监听视频错误，便于排查问题（保留调试用，可删除）
        video.addEventListener('error', function(e) {
            const err = video.error;
            console.error('视频错误：', {
                code: err.code,
                message: err.message
            });
            if (err.code === 4) {
                alert('视频源异常，请检查文件路径/格式');
            }
        });

        // 核心：自动播放逻辑（无用户交互兜底）
        async function autoPlayVideo() {
            try {
                // 先加载视频元数据，再播放
                await video.load();
                await video.play();
                console.log('视频自动播放成功');
            } catch (err) {
                console.warn('自动播放失败（浏览器策略限制）：', err);
                // 兼容方案：监听页面任意点击，首次点击后播放（无视觉按钮，点击任意区域触发）
                document.body.addEventListener('click', function playOnClick() {
                    video.play().then(() => {
                        document.body.removeEventListener('click', playOnClick); // 仅触发一次
                    });
                }, { once: true });
            }
        }

        // 页面加载完成后立即触发自动播放
        if (document.readyState === 'complete') {
            autoPlayVideo();
        } else {
            window.addEventListener('load', autoPlayVideo);
        }

        // 禁用右键菜单（可选，防止调出控制栏）
        video.oncontextmenu = () => false;
    });
</script>
</body>
</html>